<template>
  <instructions>Lock ETH for a given period of time, release the ETH and redeem reputation.</instructions>
  <div class="arc-scheme-dashboard">
    <spinbutton onclick.call="refresh()" as-button="true" text="Refresh" spin.to-view="refreshing" title="Refresh"></spinbutton>
    <form with.bind="lockModel">

      <div class="card" style="margin-bottom: 2rem">
        <div class="card-body">
          <div class="card-title">Lock</div>
          <div if.to-view="lockingPeriodIsEnded">The locking period has ended, you can't lock</div>
          <div else class="row" style="width: 30rem;">
            <div class="col-6">
              <div class="form-group bmd-form-group">
                <label for="lockAmount">Eth to Lock</label>
                <input class="form-control" type='number' id="lockAmount" value.bind="amount | ethwei & updateTrigger:'blur'" />
              </div>
            </div>
            <div class="col-6">
              <div class="form-group bmd-form-group">
                <label for="lockingPeriod">Lock for How Long</label>
                <input class="form-control" id="lockingPeriod" value.bind="period  | secondsDays & updateTrigger:'blur'" />
                <span class="bmd-help">In days. Will be rounded down to the nearest second.</span>
              </div>
            </div>
          </div>
          <div class="form-group bmd-form-group">
            <button class="btn-submit-proposal" click.delegate="lock()">Submit New Lock</button>
          </div>
        </div>
      </div>

      <div if.bind="userScore" class="card">
        <div class="card-body">
          <div class="card-title">Release</div>
          <locks-for-reputation locks.to-view="locks" release.call="release({lock})" wrapper.one-time="wrapper"></locks-for-reputation>
        </div>
      </div>

      <div if.bind="lockingPeriodIsEnded" class="card">
        <div class="card-body">
          <div class="card-title">Redeem</div>
          <div if.to-view="!userScore" class="mb-3">You have nothing to redeem</div>
          <div else class="form-group bmd-form-group">
            <button class="btn-submit-proposal" click.delegate="redeem()">Redeem Reputation</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</template>
