<template>
  <ux-dialog
    with.bind="model"
    class="dialog connections"
  >
    <ux-dialog-header>
      <div
        if.to-view="loading || (!hasDao && (hasAccepted || !isConnected || !hasAccount || !hasApprovedAccountAccess))"
        class="d-inline-block"
      >
        <img
          src="../../../../static/dutchx-blue.svg"
          class="logo d-inline-block align-top"
          alt="dxDAO"
        >
        Welcome to the dxDAO Vote Staking Interface
      </div>

      <div
        if.to-view="!loading && (hasAccepted && hasDao && hasApprovedAccountAccess)"
        class="d-inline"
      >
        <div class="d-inline-block warning-icon">⚠️</div>Important Notice: Reputation is Not Transferable
      </div>

      <div
        if.to-view="!loading && (!hasAccepted && isConnected && hasAccount && hasApprovedAccountAccess)"
        class="d-inline"
      >
        <div class="d-inline-block warning-icon">⚠️</div>Disclaimer
      </div>

    </ux-dialog-header>
    <ux-dialog-body>
      <div class="body">
        <div if.to-view="loading">
          <pageloading></pageloading>
        </div>
        <div else>
          <p if.to-view="!isConnected">
            There seems to be no connection to the blockchain. Please install and/or enable a web3 wallet such as <a
              href="https://metamask.io/"
              target="_blank"
            >MetaMask</a>, or the <a
              href="https://safe.gnosis.io/"
              target="_blank"
            >Gnosis Safe</a>,
            point it to the <span class="important">Main Ethereum Network</span>, then refresh this browser page so you can access the <a
              href="https://daotalk.org/c/daos/dx-dao"
              target="_blank"
            >dxDAO</a> Vote Staking UI.
          </p>
          <div if.to-view="isConnected && !hasAccount">
            <p>To access the <a
                href="https://daotalk.org/c/daos/dx-dao"
                target="_blank"
              >dxDAO</a> Vote Staking Interface, please log in to ${walletService.currentWallet.name & signal:'wallet.changed'}, select your desired account and allow the dxDAO Vote Staking Interface to access your account.
              <p>
                <compose view="./useSafeMessage.html">
                </compose>
              </p>
          </div>

          <div if.to-view="((isConnected && !hasAccount) || (hasAccepted && !landed && hasDao))">
            <p><span class="important">Important</span>: Reputation cannot be transferred.
              <span if.to-view="!hasAccount">Please ensure you have selected the account (ETH Address) you intend to use in the future for voting within the DAO.</span>
            </p>
            <p if.to-view="hasAccount">
              You are currently using the following account:
              <usersaddress class="d-none d-sm-inline-block"></usersaddress>
              <usersaddress
                class="d-sm-none"
                small="true"
              ></usersaddress>.
              Please be sure that you intend to use this account in the future for voting within the dxDAO.
            </p>

            <div if.to-view="hasDao && hasApprovedAccountAccess">
              <p>
                <compose view="./useSafeMessage.html">
                </compose>
              </p>
              <p class="buttonContainer">
                <button
                  class="btn btn-submit"
                  click.delegate="land()"
                >OK</button>
              </p>
            </div>
          </div>

          <div if.to-view="isConnected && (!hasAccount || !hasApprovedAccountAccess)">
            <p class="buttonContainer"><button
                class="btn btn-submit"
                style="white-space: normal"
                click.delegate="confirm()"
              >Allow the dxDAO Vote Staking Interface to Access Your Account on ${walletService.currentWallet.name & signal:'wallet.changed'}</button></p>
          </div>

          <div if.to-view="hasAccepted && isConnected && hasAccount && !hasDao">
            Please check ${walletService.currentWallet.name & signal:'wallet.changed'} and make sure you are connected to the Main Ethereum Network.
          </div>

          <div
            if.to-view="!hasAccepted && isConnected && hasAccount && hasApprovedAccountAccess"
            class="disclaimer"
          >
            <compose view="./disclaimer.html">
            </compose>
            <div class="form-group checks">
              <div class="checkbox">
                <label>
                  <input
                    type="checkbox"
                    checked.bind="checked1"
                  > I HAVE READ AND FULLY UNDERSTOOD AND AGREE TO THE DISCLAIMERS
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input
                    type="checkbox"
                    checked.bind="checked2"
                  > I AM IN FULL COMPLIANCE WITH THE RESPECTIVE LAWS AND REGULATIONS IN MY JURISDICTION
                </label>
              </div>
              <p class="buttonContainer"><button
                  class="btn btn-submit"
                  click.delegate="accept()"
                  disabled.to-view="!(checked1 && checked2)"
                >Continue...</button></p>
            </div>
          </div>
        </div>
      </div>
    </ux-dialog-body>
  </ux-dialog>
</template>
